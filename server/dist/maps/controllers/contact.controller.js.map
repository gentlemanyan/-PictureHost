{"version":3,"sources":["../../controllers/contact.controller.ts"],"names":[],"mappings":"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","file":"../../controllers/contact.controller.js","sourcesContent":["import * as Koa from 'koa';\r\nimport { Contacts } from './../models/contact.model';\r\n\r\nclass ContactController {\r\n    constructor() {}\r\n    \r\n    public async create(ctx: Koa.Context, next) {\r\n        const reqObj = ctx.request.body;\r\n        \r\n        if ( reqObj.avatar === '' || reqObj.avatar == null ) {\r\n          ctx.throw('avatar is null');\r\n        }\r\n        if ( reqObj.name === '' || reqObj.name == null ) {\r\n          ctx.throw('name is null');\r\n        }\r\n        if ( reqObj.phone === '' || reqObj.phone == null ) {\r\n          ctx.throw('phone is null');\r\n        }\r\n        const contact = new Contacts({\r\n          avatar: ctx.request.body.avatar,\r\n          name: ctx.request.body.name,\r\n          phone: ctx.request.body.phone,    \r\n        });\r\n    \r\n        const result = contact.save();\r\n        if (result) {\r\n          ctx.status = 200;\r\n          ctx.body = {\r\n            retCode: '0000',\r\n            retMsg: 'add contact success',\r\n          };\r\n        } else {\r\n          ctx.status = 500;\r\n          ctx.body = {\r\n            retCode: '0000',\r\n            retMsg: 'add contact fail',\r\n          };\r\n        }\r\n    }\r\n\r\n    public async select(ctx: Koa.Context, next) {\r\n      const reqObj = ctx.params;  \r\n\r\n      if ( reqObj.name === null || reqObj.name === '' ) {\r\n        ctx.throw('name is null');\r\n      }\r\n      let data: any;\r\n      if ( reqObj.name === 'all' ) {\r\n        data = await Contacts.find();        \r\n      } else {\r\n        data = await Contacts.find({name: reqObj.name});            \r\n      }\r\n    \r\n      ctx.status = 200;\r\n      ctx.body = {\r\n        data: data,\r\n        retCode: '0000',\r\n        retMsg: 'search contacts success',\r\n      };\r\n    }\r\n\r\n    public async delete(ctx: Koa.Context, next) {\r\n      const reqObj = ctx.params;\r\n      \r\n      if ( reqObj.name === '' || reqObj.name == null ) {\r\n        ctx.throw('name is null');\r\n      }\r\n    \r\n      const result = await Contacts.remove({name: reqObj.name});\r\n    \r\n      if (result) {\r\n        ctx.status = 200;\r\n        ctx.body = {\r\n          retCode: '0000',\r\n          retMsg: 'delete contact success',\r\n        };\r\n      } else {\r\n        ctx.status = 500;\r\n        ctx.body = {\r\n          retCode: '0000',\r\n          retMsg: 'delete contact fail',\r\n        };\r\n      }\r\n    }\r\n\r\n    public async update(ctx: Koa.Context, next) {\r\n        \r\n    }\r\n}\r\n\r\nexport default new ContactController();\r\n"]}